<div id="graph-controls-container" class="flex join">
    <button class="btn btn-outline join-item" onclick="modal_filter.showModal();">Filter</button>
    <button class="btn btn-outline join-item"
            onclick="modal_calculate.showModal();">Calculate</button>
    <button class="btn btn-outline join-item"
            onclick="modal_aggregate.showModal();">Aggregate</button>
    <button class="btn btn-outline join-item" onclick="modal_join.showModal();">Join</button>
</div>
<dialog id="modal_filter" class="modal">
    <div class="modal-box w-11/12 max-w-5xl">
        <h3 class="text-lg font-bold">New Filter Node</h3>
        <p class="py-4">Click the button below to close</p>
        <div class="modal-action">
            <form method="dialog">
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
            </form>
        </div>
        <form hx-post="/graph/create_filter_node" hx-swap="none">
            <label class="form-control w-full max-w-xs">
                <div class="label">
                    <span class="label-text">Choose input table</span>
                </div>
                <select id="new-filter-src-selector"
                        class="select select-bordered"
                        name="new_filter_src"
                        hx-get="/fragments/gc_filter_src"
                        hx-swap="outerHTML"
                        hx-target="#gc-filter-src">
                    <option disabled selected></option>
                    {% for fd in files %}<option value="{{ loop.index0 }}">{{ fd.name }}</option>{% endfor %}
                </select>
            </label>
            {% include 'fragment_gc_filter_src.jinja' %}
            <label class="form-control w-full max-w-xs">
                <div class="label">
                    <span class="label-text">Choose operation</span>
                </div>
                <select id="new-filter-op-selector"
                        class="select select-bordered"
                        name="new_filter_op">
                    <option disabled selected></option>
                    <option>
                        <
                    </option>
                    <option>></option>
                    <option>==</option>
                </select>
            </label>
            <label class="form-control w-full max-w-xs">
                <div class="label">
                    <span class="label-text">Comparison value</span>
                </div>
                <input type="text"
                       name="new_filter_comp"
                       placeholder="Type here"
                       class="input input-bordered w-full max-w-xs" />
            </label>
            <button class="btn">Create</button>
        </form>
    </div>
</dialog>
<dialog id="modal_calculate" class="modal">
    <div class="modal-box w-11/12 max-w-5xl">
        <h3 class="text-lg font-bold">New Calculate Node</h3>
        <p class="py-4">Click the button below to close</p>
        <div class="modal-action">
            <form method="dialog">
                <!-- if there is a button, it will close the modal -->
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
                <button class="btn">Close</button>
            </form>
        </div>
    </div>
</dialog>
<dialog id="modal_aggregate" class="modal">
    <div class="modal-box w-11/12 max-w-5xl">
        <h3 class="text-lg font-bold">New Aggregate Node</h3>
        <p class="py-4">Click the button below to close</p>
        <div class="modal-action">
            <form method="dialog">
                <!-- if there is a button, it will close the modal -->
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
                <button class="btn">Close</button>
            </form>
        </div>
    </div>
</dialog>
<dialog id="modal_join" class="modal">
    <div class="modal-box w-11/12 max-w-5xl">
        <h3 class="text-lg font-bold">New Join Node</h3>
        <p class="py-4">Click the button below to close</p>
        <div class="modal-action">
            <form method="dialog">
                <!-- if there is a button, it will close the modal -->
                <button class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
                <button class="btn">Close</button>
            </form>
        </div>
    </div>
</dialog>
<div id="graph-container" class="w-full h-full"></div>
<script>window.graphData = {{ graph_json | tojson }};</script>
